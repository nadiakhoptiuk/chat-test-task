{"version":3,"file":"static/js/chat.2eb88dc8.chunk.js","mappings":"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","sources":["webpack://chat-test-task/./src/components/Section/Section.module.css?dbe8","components/Section/Section.js","hooks/useFormFields.js","redux/filter/filterSelector.js","redux/chat/chatSelectors.js","webpack://chat-test-task/./src/components/ContactInfoBox/ContactInfoBox.module.css?9fcd","components/ContactInfoBox/ContactInfoBox.js","webpack://chat-test-task/./src/components/ContactItem/ContactItem.module.css?be2b","components/ContactItem/ContactItem.js","webpack://chat-test-task/./src/components/FilterInput/FilterInput.module.css?5089","components/FilterInput/FilterInput.js","webpack://chat-test-task/./src/components/ContactsList/ContactsList.module.css?d8e9","components/ContactsList/ContactsList.js","webpack://chat-test-task/./src/components/FormSendMessage/FormSendMessage.module.css?aa22","components/FormSendMessage/FormSendMessage.js","service/chuckNorrisApi.js","webpack://chat-test-task/./src/components/MessagesHistory/MessageHistory.module.css?e26b","components/MessagesHistory/MessagesHistory.js","components/Chat/Chat.js","views/ChatView/ChatView.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"section\":\"Section_section__Z2PLw\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Section.module.css';\n\nexport default function Section({\n  title,\n  isHidden,\n  width,\n  flexShrink,\n  children,\n}) {\n  return (\n    <section\n      className={s.section}\n      style={{ width: `${width}`, flexShrink: `${flexShrink}` }}\n    >\n      <h1 className={isHidden ? 'sectionTitleIsHidden' : 'sectionTitle'}>\n        {title}\n      </h1>\n      {children}\n    </section>\n  );\n}\n\nSection.propTypes = {\n  title: PropTypes.string.isRequired,\n  isHidden: PropTypes.bool.isRequired,\n  width: PropTypes.string.isRequired,\n  flexShrink: PropTypes.number.isRequired,\n};\n","import { useState } from 'react';\n\nexport default function useFormFields(initialVal) {\n  const [state, setState] = useState(initialVal);\n\n  const handleChange = ({ target: { value } }) => {\n    setState(value);\n  };\n\n  return { state, setState, handleChange };\n}\n","export const filterSelector = state => state.filter;\n","export const selectedContactIdSelector = state => state.selectedContactId;\n","// extracted by mini-css-extract-plugin\nexport default {\"contactInfoWrapper\":\"ContactInfoBox_contactInfoWrapper__av+tf\",\"avatarWrapper\":\"ContactInfoBox_avatarWrapper__Z98dj\",\"avatar\":\"ContactInfoBox_avatar__5O8YW\",\"contactName\":\"ContactInfoBox_contactName__+svwH\",\"statusIndicatorOnline\":\"ContactInfoBox_statusIndicatorOnline__n0KjE\",\"statusIndicatorOffline\":\"ContactInfoBox_statusIndicatorOffline__EYWbA\"};","import PropTypes from 'prop-types';\nimport { useGetContactByIdQuery } from 'redux/contacts';\nimport s from './ContactInfoBox.module.css';\n\nexport function ContactInfoBox({ id }) {\n  const { data } = useGetContactByIdQuery(id);\n\n  return data ? (\n    <>\n      <div className={s.contactInfoWrapper}>\n        <div className={s.avatarWrapper}>\n          <img\n            src={data?.avatar}\n            alt={`${data?.username} avatar`}\n            className={s.avatar}\n          />\n          <div\n            className={\n              data?.isOnline\n                ? s.statusIndicatorOnline\n                : s.statusIndicatorOffline\n            }\n          ></div>\n        </div>\n\n        <p className={s.contactName}>{data?.username}</p>\n      </div>\n    </>\n  ) : null;\n}\n\nContactInfoBox.propTypes = {\n  id: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"contactItem\":\"ContactItem_contactItem__Z4FuP\",\"contactBtn\":\"ContactItem_contactBtn__nMiN-\",\"selectedBtn\":\"ContactItem_selectedBtn__DiKOt ContactItem_contactBtn__nMiN-\",\"noneSelectedBtn\":\"ContactItem_noneSelectedBtn__oOELV ContactItem_contactBtn__nMiN-\"};","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { setSelectedContactId } from 'redux/chat/chatActions';\nimport { selectedContactIdSelector } from 'redux/chat/chatSelectors';\nimport { ContactInfoBox } from 'components/ContactInfoBox/ContactInfoBox';\nimport s from './ContactItem.module.css';\n\nexport default function ContactItem({ id }) {\n  const selectedContactId = useSelector(selectedContactIdSelector);\n  const dispatch = useDispatch();\n\n  function checkIsContactSelected() {\n    return JSON.stringify(id) === JSON.stringify(selectedContactId);\n  }\n\n  const isContactSelected = checkIsContactSelected();\n\n  return (\n    <li className={s.contactItem}>\n      <button\n        type=\"button\"\n        onClick={() => dispatch(setSelectedContactId(id))}\n        className={isContactSelected ? s.selectedBtn : s.noneSelectedBtn}\n      >\n        <ContactInfoBox id={id} />\n      </button>\n    </li>\n  );\n}\n\nContactItem.propTypes = {\n  id: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"inputLabel\":\"FilterInput_inputLabel__C+sAF\",\"filterInput\":\"FilterInput_filterInput__LNZay\",\"notification\":\"FilterInput_notification__67Cr3\"};","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateFilter } from 'redux/filter/filterActions';\nimport { useGetContactsQuery } from 'redux/contacts';\nimport { filterSelector } from 'redux/filter/filterSelector';\nimport s from './FilterInput.module.css';\n\nexport default function FilterInput() {\n  const { data } = useGetContactsQuery('', {\n    refetchOnFocus: true,\n    refetchOnReconnect: true,\n  });\n  const filter = useSelector(filterSelector);\n  const dispatch = useDispatch();\n\n  const onInputFind = evt => {\n    const stringForFilter = evt.target.value;\n    dispatch(updateFilter(stringForFilter));\n  };\n\n  return (\n    <>\n      {data?.length > 0 ? (\n        <label className={s.inputLabel}>\n          <input\n            className={s.filterInput}\n            type=\"text\"\n            name=\"filter\"\n            value={filter}\n            onChange={onInputFind}\n            placeholder=\"Search or start new chat\"\n          />\n        </label>\n      ) : null}\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"contactsList\":\"ContactsList_contactsList__ZQI1L\"};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { useGetContactsQuery } from 'redux/contacts';\nimport { filterSelector } from 'redux/filter/filterSelector';\nimport ContactItem from 'components/ContactItem';\nimport FilterInput from 'components/FilterInput';\nimport Section from 'components/Section';\nimport s from './ContactsList.module.css';\n\nexport default function ContactsList() {\n  const { data } = useGetContactsQuery();\n  const filter = useSelector(filterSelector);\n\n  const filterContacts = () => {\n    const normalizedString = filter?.toLowerCase();\n\n    return filter\n      ? data?.filter(contact =>\n          contact.username.toLowerCase().includes(normalizedString)\n        )\n      : data;\n  };\n\n  const filteredContacts = filterContacts();\n\n  return (\n    <Section\n      title=\"Chats\"\n      isHidden={false}\n      width={window.innerWidth < 768 ? '150px' : '300px'}\n      flexShrink={0}\n    >\n      <FilterInput />\n      <ul className={s.contactsList}>\n        {filteredContacts\n          ? filteredContacts?.map(filteredContact => (\n              <ContactItem key={filteredContact.id} id={filteredContact.id} />\n            ))\n          : null}\n      </ul>\n    </Section>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"formWrapper\":\"FormSendMessage_formWrapper__pP-FY\",\"form\":\"FormSendMessage_form__qHlW2\",\"input\":\"FormSendMessage_input__hlTCO\",\"formBtn\":\"FormSendMessage_formBtn__R-YUO\",\"btnIcon\":\"FormSendMessage_btnIcon__qVR2i\"};","import { useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport getChuckResponce from 'service/chuckNorrisApi';\nimport { GrSend } from 'react-icons/gr';\nimport { useAddMessageToContactMutation } from 'redux/contacts';\nimport useFormFields from 'hooks/useFormFields';\nimport s from './FormSendMessage.module.css';\n\nexport default function FormSendMessage({\n  id,\n  setMessageList,\n  data,\n  messageList,\n}) {\n  const {\n    state: message,\n    setState: setMessage,\n    handleChange: handleMessageChange,\n  } = useFormFields('');\n  const [addMessageToContact] = useAddMessageToContactMutation();\n\n  const generateNewMessageList = useCallback(\n    async (message, bool) => {\n      const newMessage = {\n        message: message,\n        date: new Date().toISOString(),\n        isSendedByMe: bool,\n      };\n\n      const newList = [...data?.messages, newMessage].sort(\n        (a, b) => new Date(a.date) - new Date(b.date)\n      );\n      await setMessageList(newList);\n\n      await addMessageToContact({\n        id: id,\n        contact: { ...data, messages: newList },\n      });\n    },\n    [addMessageToContact, data, id, setMessageList]\n  );\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    generateNewMessageList(message, true);\n    setMessage('');\n  };\n\n  useEffect(() => {\n    if (!messageList) {\n      return;\n    }\n\n    const dateNow = new Date().getTime();\n    const lastMessage = messageList[messageList?.length - 1];\n    const lastMessageDate = new Date(lastMessage?.date).getTime();\n\n    if (!lastMessage?.isSendedByMe || dateNow - lastMessageDate > 10000) {\n      return;\n    } else {\n      const timeOut = setTimeout(() => {\n        getChuckResponce()\n          .then(message => {\n            generateNewMessageList(message, false);\n          })\n          .catch(error => {\n            console.log(error);\n          });\n      }, 10000);\n\n      return () => {\n        clearTimeout(timeOut);\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [messageList]);\n\n  return (\n    <div className={s.formWrapper}>\n      <form className={s.form} onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          name=\"message\"\n          className={s.input}\n          placeholder=\"Type your message...\"\n          value={message}\n          onChange={handleMessageChange}\n        />\n        <button type=\"submit\" className={s.formBtn}>\n          <GrSend className={s.btnIcon} />\n        </button>\n      </form>\n    </div>\n  );\n}\n\nFormSendMessage.propTypes = {\n  id: PropTypes.string,\n  setMessageList: PropTypes.func,\n  data: PropTypes.shape({\n    username: PropTypes.string.isRequired,\n    avatar: PropTypes.string,\n    isOnline: PropTypes.bool.isRequired,\n    messages: PropTypes.arrayOf(\n      PropTypes.shape({\n        message: PropTypes.string.isRequired,\n        date: PropTypes.string.isRequired,\n        isSendedByMe: PropTypes.bool.isRequired,\n      }).isRequired\n    ),\n  }),\n};\n","import axios from 'axios';\nconst BASE_URL = 'https://api.chucknorris.io/jokes/random';\n\nexport default function getChuckResponce() {\n  return axios({\n    method: 'get',\n    url: BASE_URL,\n  }).then(response => response.data.value);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"messageList\":\"MessageHistory_messageList__a9+dD\",\"message\":\"MessageHistory_message__5aRvm\",\"myMessage\":\"MessageHistory_myMessage__HM7bD MessageHistory_message__5aRvm\",\"interlocutorMessage\":\"MessageHistory_interlocutorMessage__7+L5R MessageHistory_message__5aRvm\",\"messageText\":\"MessageHistory_messageText__TJe4M\",\"myMessageText\":\"MessageHistory_myMessageText__RnlJ9 MessageHistory_messageText__TJe4M\",\"interlocutorMessageText\":\"MessageHistory_interlocutorMessageText__7j-Pq MessageHistory_messageText__TJe4M\",\"messageDate\":\"MessageHistory_messageDate__lZ3A9\"};","import { useEffect, useState } from 'react';\nimport { format } from 'date-fns';\nimport PropTypes from 'prop-types';\nimport { useGetContactByIdQuery } from 'redux/contacts';\nimport FormSendMessage from 'components/FormSendMessage';\nimport s from './MessageHistory.module.css';\n\nexport default function MessagesHistory({ id, messageListRef }) {\n  const [messageList, setMessageList] = useState(messageListRef?.current);\n  const { data } = useGetContactByIdQuery(id, {\n    refetchOnReconnect: true,\n    refetchOnMountOrArgChange: true,\n  });\n\n  useEffect(() => {\n    if (document?.getElementById('chat') === null) {\n      return;\n    } else {\n      function scrollToBottom(element) {\n        element.scroll({ top: element.scrollHeight, behavior: 'smooth' });\n      }\n      scrollToBottom(document.getElementById('chat'));\n    }\n  }, [id, messageList]);\n\n  useEffect(() => {\n    if (data && data?.length !== 0) {\n      setMessageList(data?.messages);\n    }\n  }, [data, setMessageList]);\n\n  return (\n    <>\n      <ul className={s.messageList} id=\"chat\">\n        {messageList\n          ? messageList?.map(({ message, isSendedByMe, date }, index) => {\n              const newDate = format(new Date(date), 'PP, p');\n\n              return (\n                <li\n                  key={index}\n                  className={isSendedByMe ? s.myMessage : s.interlocutorMessage}\n                >\n                  <p\n                    className={\n                      isSendedByMe ? s.myMessageText : s.interlocutorMessageText\n                    }\n                  >\n                    {message}\n                  </p>\n                  <span className={s.messageDate}>{newDate}</span>\n                </li>\n              );\n            })\n          : null}\n      </ul>\n      <FormSendMessage\n        id={id}\n        setMessageList={setMessageList}\n        data={data}\n        messageList={messageList}\n      />\n    </>\n  );\n}\n\nMessagesHistory.propTypes = {\n  id: PropTypes.string,\n  messageListRef: PropTypes.arrayOf(\n    PropTypes.shape({\n      message: PropTypes.string.isRequired,\n      date: PropTypes.string.isRequired,\n      isSendedByMe: PropTypes.bool.isRequired,\n    })\n  ),\n};\n","import { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useGetContactByIdQuery } from 'redux/contacts';\nimport { ContactInfoBox } from 'components/ContactInfoBox/ContactInfoBox';\nimport MessagesHistory from 'components/MessagesHistory';\nimport Section from 'components/Section';\n\nexport default function Chat({ id }) {\n  const { data } = useGetContactByIdQuery(id);\n\n  useEffect(() => {\n    if (!data || data?.messages?.length === 0) {\n      return;\n    } else {\n      const sortArrayByDate = array => {\n        return [...array].sort((a, b) => new Date(a.date) - new Date(b.date));\n      };\n\n      const sortedArray = sortArrayByDate(data?.messages);\n      messageListRef.current = sortedArray;\n    }\n  }, [data]);\n\n  const messageListRef = useRef(null);\n\n  return (\n    <Section title=\"Chat\" isHidden={true} width=\"100%\" flexShrink={1}>\n      <ContactInfoBox id={id} />\n      <MessagesHistory id={id} messageListRef={messageListRef.current} />\n    </Section>\n  );\n}\n\nChat.propTypes = {\n  id: PropTypes.string,\n};\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setSelectedContactId } from 'redux/chat/chatActions';\nimport { useGetContactsQuery } from 'redux/contacts';\nimport Container from 'components/Container';\nimport ContactsList from 'components/ContactsList';\nimport Chat from 'components/Chat';\n\nexport default function ChatView() {\n  const dispatch = useDispatch();\n  const selectedContactId = useSelector(state => state.selectedContactId);\n  const { data, isFetching } = useGetContactsQuery('', {\n    refetchOnReconnect: true,\n    refetchOnMountOrArgChange: true,\n  });\n\n  useEffect(() => {\n    if (!data) return;\n    if (!isFetching && selectedContactId === null) {\n      dispatch(setSelectedContactId(data[0].id));\n    }\n  }, [data, dispatch, isFetching, selectedContactId]);\n\n  return (\n    <>\n      <Container style={{ display: 'flex' }}>\n        <ContactsList />\n        <Chat id={selectedContactId} />\n      </Container>\n    </>\n  );\n}\n"],"names":["Section","title","isHidden","width","flexShrink","children","className","s","style","useFormFields","initialVal","useState","state","setState","handleChange","value","target","filterSelector","filter","selectedContactIdSelector","selectedContactId","ContactInfoBox","id","data","useGetContactByIdQuery","src","avatar","alt","username","isOnline","ContactItem","useSelector","dispatch","useDispatch","isContactSelected","JSON","stringify","type","onClick","setSelectedContactId","FilterInput","useGetContactsQuery","refetchOnFocus","refetchOnReconnect","length","name","onChange","evt","stringForFilter","updateFilter","placeholder","ContactsList","filteredContacts","normalizedString","toLowerCase","contact","includes","filterContacts","window","innerWidth","map","filteredContact","FormSendMessage","setMessageList","messageList","message","setMessage","handleMessageChange","useAddMessageToContactMutation","addMessageToContact","generateNewMessageList","useCallback","bool","newMessage","date","Date","toISOString","isSendedByMe","newList","messages","sort","a","b","handleSubmit","preventDefault","useEffect","dateNow","getTime","lastMessage","lastMessageDate","timeOut","setTimeout","axios","method","url","then","response","catch","error","console","log","clearTimeout","onSubmit","MessagesHistory","messageListRef","current","refetchOnMountOrArgChange","document","getElementById","element","scroll","top","scrollHeight","behavior","index","newDate","format","Chat","array","sortedArray","useRef","ChatView","isFetching","Container","display"],"sourceRoot":""}